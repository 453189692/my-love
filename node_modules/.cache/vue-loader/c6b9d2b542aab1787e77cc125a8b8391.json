{"remainingRequest":"/Users/lihsuan/code/love/my-love/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lihsuan/code/love/my-love/src/view/love/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lihsuan/code/love/my-love/src/view/love/index.vue","mtime":1611040573460},{"path":"/Users/lihsuan/code/love/my-love/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1610942676622},{"path":"/Users/lihsuan/code/love/my-love/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1610942676457},{"path":"/Users/lihsuan/code/love/my-love/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1610942676622},{"path":"/Users/lihsuan/code/love/my-love/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1610942719961}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmltcG9ydCB7IFRyZWUgfSBmcm9tICJAL2NvbXBvbmVudHMvanMvbG92ZSI7CmltcG9ydCB7IHNsZWVwLCB0aW1lRWxhcHNlIH0gZnJvbSAiQC91dGlscy90b29scyI7Ci8qZ2xvYmFsICRhd2FpdCovCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZGV4IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgeWVhcjogMjAxOCwKICAgICAgbW9udGg6IDIsCiAgICAgIGRheTogMTMsCiAgICAgIGhvdXI6IDAsCiAgICAgIG1pbnV0ZTogNDUsCiAgICAgIHNlY29uZDogMCwKICAgICAgbXVzaWM6ICJAL2Fzc2V0cy9tdXNpYy9DYW5vblAubXAzIiwKICAgICAgaG9sZDogMSwKICAgICAgZm9vdDoge30KICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zdGFydCgpOwogIH0sCiAgbWV0aG9kczogewogICAgc3RhcnQoKSB7CiAgICAgIGxldCBjYW52YXMgPSAkKCIjY2FudmFzIik7CiAgICAgIGxldCBhdWRpbyA9IHRoaXMuJHJlZnNbImF1ZGlvIl07CiAgICAgIGlmICghY2FudmFzWzBdLmdldENvbnRleHQpIHsKICAgICAgICAkKCIjZXJyb3IiKS5zaG93KCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBsZXQgd2lkdGggPSBjYW52YXMud2lkdGgoKTsKICAgICAgbGV0IGhlaWdodCA9IGNhbnZhcy5oZWlnaHQoKTsKCiAgICAgIGNhbnZhcy5hdHRyKCJ3aWR0aCIsIHdpZHRoKTsKICAgICAgY2FudmFzLmF0dHIoImhlaWdodCIsIGhlaWdodCk7CiAgICAgIGxldCBvcHRzID0gewogICAgICAgIHNlZWQ6IHsKICAgICAgICAgIHg6IHdpZHRoIC8gMiAtIDIwLAogICAgICAgICAgY29sb3I6ICJyZ2IoMTkwLCAyNiwgMzcpIiwKICAgICAgICAgIHNjYWxlOiAyCiAgICAgICAgfSwKICAgICAgICBicmFuY2g6IFsKICAgICAgICAgIFsKICAgICAgICAgICAgNTM1LAogICAgICAgICAgICA2ODAsCiAgICAgICAgICAgIDU3MCwKICAgICAgICAgICAgMjUwLAogICAgICAgICAgICA1MDAsCiAgICAgICAgICAgIDIwMCwKICAgICAgICAgICAgMzAsCiAgICAgICAgICAgIDEwMCwKICAgICAgICAgICAgWwogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgIDU0MCwKICAgICAgICAgICAgICAgIDUwMCwKICAgICAgICAgICAgICAgIDQ1NSwKICAgICAgICAgICAgICAgIDQxNywKICAgICAgICAgICAgICAgIDM0MCwKICAgICAgICAgICAgICAgIDQwMCwKICAgICAgICAgICAgICAgIDEzLAogICAgICAgICAgICAgICAgMTAwLAogICAgICAgICAgICAgICAgW1s0NTAsIDQzNSwgNDM0LCA0MzAsIDM5NCwgMzk1LCAyLCA0MF1dCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICA1NTAsCiAgICAgICAgICAgICAgICA0NDUsCiAgICAgICAgICAgICAgICA2MDAsCiAgICAgICAgICAgICAgICAzNTYsCiAgICAgICAgICAgICAgICA2ODAsCiAgICAgICAgICAgICAgICAzNDUsCiAgICAgICAgICAgICAgICAxMiwKICAgICAgICAgICAgICAgIDEwMCwKICAgICAgICAgICAgICAgIFtbNTc4LCA0MDAsIDY0OCwgNDA5LCA2NjEsIDQyNiwgMywgODBdXQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgWzUzOSwgMjgxLCA1MzcsIDI0OCwgNTM0LCAyMTcsIDMsIDQwXSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICA1NDYsCiAgICAgICAgICAgICAgICAzOTcsCiAgICAgICAgICAgICAgICA0MTMsCiAgICAgICAgICAgICAgICAyNDcsCiAgICAgICAgICAgICAgICAzMjgsCiAgICAgICAgICAgICAgICAyNDQsCiAgICAgICAgICAgICAgICA5LAogICAgICAgICAgICAgICAgODAsCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIFs0MjcsIDI4NiwgMzgzLCAyNTMsIDM3MSwgMjA1LCAyLCA0MF0sCiAgICAgICAgICAgICAgICAgIFs0OTgsIDM0NSwgNDM1LCAzMTUsIDM5NSwgMzMwLCA0LCA2MF0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgIDU0NiwKICAgICAgICAgICAgICAgIDM1NywKICAgICAgICAgICAgICAgIDYwOCwKICAgICAgICAgICAgICAgIDI1MiwKICAgICAgICAgICAgICAgIDY3OCwKICAgICAgICAgICAgICAgIDIyMSwKICAgICAgICAgICAgICAgIDYsCiAgICAgICAgICAgICAgICAxMDAsCiAgICAgICAgICAgICAgICBbWzU5MCwgMjkzLCA2NDYsIDI3NywgNjQ4LCAyNzEsIDIsIDgwXV0KICAgICAgICAgICAgICBdCiAgICAgICAgICAgIF0KICAgICAgICAgIF0KICAgICAgICBdLAogICAgICAgIGJsb29tOiB7CiAgICAgICAgICBudW06IDk5OSwKICAgICAgICAgIHdpZHRoOiAxMDgwLAogICAgICAgICAgaGVpZ2h0OiA2NTAsCiAgICAgICAgICBzY2FsZTogMS41CiAgICAgICAgfSwKICAgICAgICBmb290ZXI6IHsKICAgICAgICAgIHdpZHRoOiAxMjAwLAogICAgICAgICAgaGVpZ2h0OiA1LAogICAgICAgICAgc3BlZWQ6IDEwCiAgICAgICAgfQogICAgICB9OwogICAgICBsZXQgdHJlZSA9IG5ldyBUcmVlKGNhbnZhc1swXSwgd2lkdGgsIGhlaWdodCwgb3B0cyk7CiAgICAgIGxldCBzZWVkID0gdHJlZS5zZWVkOwogICAgICB0aGlzLmZvb3QgPSB0cmVlLmZvb3RlcjsKCiAgICAgIGNhbnZhcwogICAgICAgIC5jbGljayhlID0+IHsKICAgICAgICAgIGlmICh0aGlzLiRyZWZzLmF1ZGlvLnBhdXNlZCkgewogICAgICAgICAgICB0aGlzLiRyZWZzLmF1ZGlvLnBsYXkoKTsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBvZmZzZXQgPSBjYW52YXMub2Zmc2V0KCksCiAgICAgICAgICAgIHgsCiAgICAgICAgICAgIHk7CiAgICAgICAgICB4ID0gZS5wYWdlWCAtIG9mZnNldC5sZWZ0OwogICAgICAgICAgeSA9IGUucGFnZVkgLSBvZmZzZXQudG9wOwogICAgICAgICAgaWYgKHNlZWQuaG92ZXIoeCwgeSkpIHsKICAgICAgICAgICAgdGhpcy5ob2xkID0gMDsKICAgICAgICAgICAgY2FudmFzLnVuYmluZCgiY2xpY2siKTsKICAgICAgICAgICAgY2FudmFzLnVuYmluZCgibW91c2Vtb3ZlIik7CiAgICAgICAgICAgIGNhbnZhcy5yZW1vdmVDbGFzcygiaGFuZCIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLm1vdXNlbW92ZShlID0+IHsKICAgICAgICAgIGxldCBvZmZzZXQgPSBjYW52YXMub2Zmc2V0KCksCiAgICAgICAgICAgIHgsCiAgICAgICAgICAgIHk7CiAgICAgICAgICB4ID0gZS5wYWdlWCAtIG9mZnNldC5sZWZ0OwogICAgICAgICAgeSA9IGUucGFnZVkgLSBvZmZzZXQudG9wOwogICAgICAgICAgY2FudmFzLnRvZ2dsZUNsYXNzKCJoYW5kIiwgc2VlZC5ob3Zlcih4LCB5KSk7CiAgICAgICAgfSk7CgogICAgICBsZXQgcnVuQXN5bmMgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgYXdhaXQgdGhpcy5zZWVkQW5pbWF0ZShzZWVkKTsKICAgICAgICBhd2FpdCB0aGlzLmdyb3dBbmltYXRlKHRyZWUpOwogICAgICAgIGF3YWl0IHRoaXMuZmxvd0FuaW1hdGUodHJlZSk7CiAgICAgICAgYXdhaXQgdGhpcy5tb3ZlQW5pbWF0ZSh0cmVlLCBjYW52YXMpOwogICAgICAgIHRoaXMudGV4dEFuaW1hdGUoKTsKICAgICAgICBhd2FpdCB0aGlzLmp1bXBBbmltYXRlKHRyZWUsIHdpZHRoLCBoZWlnaHQpOwogICAgICB9OwoKICAgICAgcnVuQXN5bmMoKTsKICAgIH0sCiAgICBhc3luYyBzZWVkQW5pbWF0ZShzZWVkKSB7CiAgICAgIHNlZWQuZHJhdygpOwogICAgICB3aGlsZSAodGhpcy5ob2xkKSB7CiAgICAgICAgYXdhaXQgc2xlZXAoMTApOwogICAgICB9CiAgICAgIHdoaWxlIChzZWVkLmNhblNjYWxlKCkpIHsKICAgICAgICBzZWVkLnNjYWxlKDAuOTUpOwogICAgICAgIGF3YWl0IHNsZWVwKDEwKTsKICAgICAgfQogICAgICB3aGlsZSAoc2VlZC5jYW5Nb3ZlKCkpIHsKICAgICAgICBzZWVkLm1vdmUoMCwgMik7CiAgICAgICAgdGhpcy5mb290LmRyYXcoKTsKICAgICAgICBhd2FpdCBzbGVlcCgxMCk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBncm93QW5pbWF0ZSh0cmVlKSB7CiAgICAgIGRvIHsKICAgICAgICB0cmVlLmdyb3coKTsKICAgICAgICBhd2FpdCBzbGVlcCgxMCk7CiAgICAgIH0gd2hpbGUgKHRyZWUuY2FuR3JvdygpKTsKICAgIH0sCiAgICBhc3luYyBmbG93QW5pbWF0ZSh0cmVlKSB7CiAgICAgIGRvIHsKICAgICAgICB0cmVlLmZsb3dlcigyKTsKICAgICAgICBhd2FpdCBzbGVlcCgxMCk7CiAgICAgIH0gd2hpbGUgKHRyZWUuY2FuRmxvd2VyKCkpOwogICAgfSwKICAgIGFzeW5jIG1vdmVBbmltYXRlKHRyZWUsIGNhbnZhcykgewogICAgICB0cmVlLnNuYXBzaG90KCJwMSIsIDI0MCwgMCwgNjEwLCA2ODApOwogICAgICB3aGlsZSAodHJlZS5tb3ZlKCJwMSIsIDUwMCwgMCkpIHsKICAgICAgICB0aGlzLmZvb3QuZHJhdygpOwogICAgICAgIGF3YWl0IHNsZWVwKDEwKTsKICAgICAgfQogICAgICB0aGlzLmZvb3QuZHJhdygpOwogICAgICB0cmVlLnNuYXBzaG90KCJwMiIsIDUwMCwgMCwgNjEwLCA2ODApOwoKICAgICAgLy8g5Lya5pyJ6Zeq54OB5LiN5b6X5oSP6L+Z5qC35YGaCiAgICAgIGNhbnZhcwogICAgICAgIC5wYXJlbnQoKQogICAgICAgIC5jc3MoImJhY2tncm91bmQiLCAidXJsKCIgKyB0cmVlLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIikgKyAiKSIpOwogICAgICBjYW52YXMuY3NzKCJiYWNrZ3JvdW5kIiwgIiNmZmUiKTsKICAgICAgYXdhaXQgc2xlZXAoMzAwKTsKICAgICAgY2FudmFzLmNzcygiYmFja2dyb3VuZCIsICJub25lIik7CiAgICB9LAogICAgYXN5bmMganVtcEFuaW1hdGUodHJlZSwgd2lkdGgsIGhlaWdodCkgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uCiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgdHJlZS5jdHguY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICAgIHRyZWUuanVtcCgpOwogICAgICAgIHRoaXMuZm9vdC5kcmF3KCk7CiAgICAgICAgYXdhaXQgc2xlZXAoMjApOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgdGV4dEFuaW1hdGUoKSB7CiAgICAgIGxldCB0b2dldGhlciA9IG5ldyBEYXRlKCk7CiAgICAgIHRvZ2V0aGVyLnNldEZ1bGxZZWFyKHRoaXMueWVhciwgdGhpcy5tb250aCAtIDEsIHRoaXMuZGF5KTsKICAgICAgdG9nZXRoZXIuc2V0SG91cnModGhpcy5ob3VyKTsKICAgICAgdG9nZXRoZXIuc2V0TWludXRlcyh0aGlzLm1pbnV0ZSk7CiAgICAgIHRvZ2V0aGVyLnNldFNlY29uZHModGhpcy5zZWNvbmQpOwoKICAgICAgJCgiI2NvZGUiKQogICAgICAgIC5zaG93KCkKICAgICAgICAudHlwZXdyaXRlcigpOwogICAgICAkKCIjY2xvY2stYm94IikuZmFkZUluKDUwMCk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRpbWVFbGFwc2UodG9nZXRoZXIpOwogICAgICB9LCAxMDAwKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/love","sourcesContent":["<template>\n  <div>\n    <audio\n      src=\"@/assets/music/CanonP.mp3\"\n      autoplay=\"autoplay\"\n      preload=\"auto\"\n      loop=\"\"\n      id=\"audio\"\n      ref=\"audio\"\n      con\n    ></audio>\n    <div id=\"wrap\">\n      <div id=\"text\">\n        <div id=\"code\">\n          <span class=\"say\">贺方荣，我会牵着你的手，走到满头白发的那一天，</span\n          ><br />\n          <span class=\"say\">我会守护你生命里的精彩，并陪伴你一路精彩下去。</span\n          ><br />\n          <span class=\"say\">你的幸福快乐，是我一生的追求。</span><br />\n          <span class=\"say\">我会每一天带着笑脸，和你说早安，</span><br />\n          <span class=\"say\">我会每一晚与你道声晚安再入梦乡，</span><br />\n          <span class=\"say\">我会带你去所有你想去的地方，</span><br />\n          <span class=\"say\">陪你闹看你笑</span><br />\n          <span class=\"say\">历经你生命中所有的点点滴滴。</span><br />\n          <span class=\"say\">我期待这一生与你一起走过，</span><br />\n          <span class=\"say\">我期待与你慢慢变老</span><br />\n          <span class=\"say\">等我们老到哪儿也去不了，</span><br />\n          <span class=\"say\">还能满载着一生的幸福快乐 ！</span><br />\n          <br />\n          <span class=\"say\">我会为我们的未来撑起一片天空，</span><br />\n          <span class=\"say\">为我们的将来担负起一生的责任，</span><br />\n          <span class=\"say\">愿意为你去做每一件能让你开心快乐的事。</span><br />\n          <span class=\"say\">所有我们经历的点点滴滴，</span><br />\n          <span class=\"say\">都是我们一辈子最美的回忆。</span><br />\n          <span class=\"say\">我愿意爱你直到老去！</span><br />\n\n          <span class=\"say\"><span class=\"space\"></span> -- Yours, 亚轩</span>\n        </div>\n      </div>\n      <div id=\"clock-box\">\n        李亚轩 与 贺方荣 在一起的\n        <div id=\"clock\"></div>\n      </div>\n      <canvas id=\"canvas\" width=\"1100\" height=\"680\"></canvas>\n    </div>\n  </div>\n</template>\n\n<script>\nimport $ from \"jquery\";\nimport { Tree } from \"@/components/js/love\";\nimport { sleep, timeElapse } from \"@/utils/tools\";\n/*global $await*/\n\nexport default {\n  name: \"index\",\n  data() {\n    return {\n      year: 2018,\n      month: 2,\n      day: 13,\n      hour: 0,\n      minute: 45,\n      second: 0,\n      music: \"@/assets/music/CanonP.mp3\",\n      hold: 1,\n      foot: {}\n    };\n  },\n  mounted() {\n    this.start();\n  },\n  methods: {\n    start() {\n      let canvas = $(\"#canvas\");\n      let audio = this.$refs[\"audio\"];\n      if (!canvas[0].getContext) {\n        $(\"#error\").show();\n        return false;\n      }\n\n      let width = canvas.width();\n      let height = canvas.height();\n\n      canvas.attr(\"width\", width);\n      canvas.attr(\"height\", height);\n      let opts = {\n        seed: {\n          x: width / 2 - 20,\n          color: \"rgb(190, 26, 37)\",\n          scale: 2\n        },\n        branch: [\n          [\n            535,\n            680,\n            570,\n            250,\n            500,\n            200,\n            30,\n            100,\n            [\n              [\n                540,\n                500,\n                455,\n                417,\n                340,\n                400,\n                13,\n                100,\n                [[450, 435, 434, 430, 394, 395, 2, 40]]\n              ],\n              [\n                550,\n                445,\n                600,\n                356,\n                680,\n                345,\n                12,\n                100,\n                [[578, 400, 648, 409, 661, 426, 3, 80]]\n              ],\n              [539, 281, 537, 248, 534, 217, 3, 40],\n              [\n                546,\n                397,\n                413,\n                247,\n                328,\n                244,\n                9,\n                80,\n                [\n                  [427, 286, 383, 253, 371, 205, 2, 40],\n                  [498, 345, 435, 315, 395, 330, 4, 60]\n                ]\n              ],\n              [\n                546,\n                357,\n                608,\n                252,\n                678,\n                221,\n                6,\n                100,\n                [[590, 293, 646, 277, 648, 271, 2, 80]]\n              ]\n            ]\n          ]\n        ],\n        bloom: {\n          num: 999,\n          width: 1080,\n          height: 650,\n          scale: 1.5\n        },\n        footer: {\n          width: 1200,\n          height: 5,\n          speed: 10\n        }\n      };\n      let tree = new Tree(canvas[0], width, height, opts);\n      let seed = tree.seed;\n      this.foot = tree.footer;\n\n      canvas\n        .click(e => {\n          if (this.$refs.audio.paused) {\n            this.$refs.audio.play();\n          }\n          let offset = canvas.offset(),\n            x,\n            y;\n          x = e.pageX - offset.left;\n          y = e.pageY - offset.top;\n          if (seed.hover(x, y)) {\n            this.hold = 0;\n            canvas.unbind(\"click\");\n            canvas.unbind(\"mousemove\");\n            canvas.removeClass(\"hand\");\n          }\n        })\n        .mousemove(e => {\n          let offset = canvas.offset(),\n            x,\n            y;\n          x = e.pageX - offset.left;\n          y = e.pageY - offset.top;\n          canvas.toggleClass(\"hand\", seed.hover(x, y));\n        });\n\n      let runAsync = async () => {\n        await this.seedAnimate(seed);\n        await this.growAnimate(tree);\n        await this.flowAnimate(tree);\n        await this.moveAnimate(tree, canvas);\n        this.textAnimate();\n        await this.jumpAnimate(tree, width, height);\n      };\n\n      runAsync();\n    },\n    async seedAnimate(seed) {\n      seed.draw();\n      while (this.hold) {\n        await sleep(10);\n      }\n      while (seed.canScale()) {\n        seed.scale(0.95);\n        await sleep(10);\n      }\n      while (seed.canMove()) {\n        seed.move(0, 2);\n        this.foot.draw();\n        await sleep(10);\n      }\n    },\n    async growAnimate(tree) {\n      do {\n        tree.grow();\n        await sleep(10);\n      } while (tree.canGrow());\n    },\n    async flowAnimate(tree) {\n      do {\n        tree.flower(2);\n        await sleep(10);\n      } while (tree.canFlower());\n    },\n    async moveAnimate(tree, canvas) {\n      tree.snapshot(\"p1\", 240, 0, 610, 680);\n      while (tree.move(\"p1\", 500, 0)) {\n        this.foot.draw();\n        await sleep(10);\n      }\n      this.foot.draw();\n      tree.snapshot(\"p2\", 500, 0, 610, 680);\n\n      // 会有闪烁不得意这样做\n      canvas\n        .parent()\n        .css(\"background\", \"url(\" + tree.toDataURL(\"image/png\") + \")\");\n      canvas.css(\"background\", \"#ffe\");\n      await sleep(300);\n      canvas.css(\"background\", \"none\");\n    },\n    async jumpAnimate(tree, width, height) {\n      // eslint-disable-next-line no-constant-condition\n      while (true) {\n        tree.ctx.clearRect(0, 0, width, height);\n        tree.jump();\n        this.foot.draw();\n        await sleep(20);\n      }\n    },\n    async textAnimate() {\n      let together = new Date();\n      together.setFullYear(this.year, this.month - 1, this.day);\n      together.setHours(this.hour);\n      together.setMinutes(this.minute);\n      together.setSeconds(this.second);\n\n      $(\"#code\")\n        .show()\n        .typewriter();\n      $(\"#clock-box\").fadeIn(500);\n      setTimeout(() => {\n        timeElapse(together);\n      }, 1000);\n    }\n  }\n};\n</script>\n\n<style scoped></style>\n"]}]}